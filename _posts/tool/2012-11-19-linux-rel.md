---
layout: post
title: "Linux"
categories: [tool, linux]
---

### 常用操作

* 查看大文件 `head -10 | tail -20 file`
* (多)文件查找`grep 'regex' files`
* 查看文件(夹)大小 `du -sh * | sort -n`
* 查看文件夹信息 `df -h`
* 转化适合查看的数据 `-h` 如 `ls -lh`
* 查找文件 `find /dir -name 'name-regex' -type f ` 
* 查找文件名，文件内容 `find ./ -type f | grep fname | xargs grep fcontent`
* 查找并删除文件 `find ./ -name fname -delete or find ./ -name fname | xargs rm`
* 远程拷贝 `scp -r user@ip-addr:path/to/src local/dir/des`
* 查找端口 windows` netstat -aon|findstr "9050" `` tasklist|findstr "2016" `
* 删除所有 `*.pyc`文件 `find / -iname "*.pyc" -exec rm -f '{}' ';'`
* 删除不含有`.`的文件 `ls ./ | grep ^[^.]*$ | xargs rm`
* 删除`.class`结尾的文件 `ls ./ | grep .*\.java$ | xargs rm`


### 输入法fcitx
使用Quick Phrase 打出一些不常用字符，如`α，β`等

参考[这里](https://fcitx-im.org/wiki/QuickPhrase)

### 软件安装删除

* 通过`make`命令: `./configure --prefix=/usr/local/location ... & make & make install --> make unintall`

* 通过`dpkg`命令: `dpkg -i(--install) *.deb --> dpke -r(--remove) *.deb`

### [权限](http://www.linuxquestions.org/linux/answers/Security/Quick_and_Dirty_Guide_to_Linux_File_Permissions)

**注意**: 这些都是Linux文件系统的权限机制，需要文件放在Ext格式的磁盘上

基本结构：`-rwxr-xr-x` 

* 第一位表示文件(-)或目录(d)
* 后面三位是owner权限
* 后面三位是group权限
* 后面三位是other权限

|      | owner |         |      | group |         |      |everyone|         |
| read | write | execute | read | write | execute | read | write  | execute |
| 400  |  200  |  100    |  40  |  20   |   10    |  4   |   2    |   1     |

常用命令

* chmod 775 myscript 
* chmod a+x filename # adds execute permissions to all
* chmod u+x filename # adds execute permissions to the file's owner
* chmod ug+w filename # adds write permissions to the file's owner and group
* chmod o-rwx filename # removes read, write, and execute permissions from other
* chmod a=rx filename # creates a 555 permission from scratch

### 压缩，解压缩

常用命令

1. 压缩成gzip文件: `tar -zcvf folder.tar.gz folder/`
2. 解压缩: `tar -zxvf folder.tar.gz`
3. 打包，不压缩: `tar -cvf folder.tar.gz folder/`
4. 解包: `tar -xvf folder.tar.gz`

详细用法

    tar [-cxtzjvfpPN] 文件与目录
      -c :建立压缩文件的参数命令（creat的意思）
      -x :解压缩文件的参数命令
      -t :查看tar包里文件的命令特别注意，在使用参数时,c/x/t只能有一个，不能同时存在
      因为不可能同时压缩与解压缩。
      -z :是否同时具有gzip的属性，即是否需要用gzip压缩
      -j :是否同时具有bz2的属性，即是否需要用bzip2压缩（记不住的就是它）
      -v :压缩过程中显示文件，这个常用，呵基本上我现在每次解压都会看一下里面的文件
      -f :使用文件名，之后立即加文件名，不能再加别的参数
      -p :使用原文件的原来属性（属性不会根据用户而变），这个从来没用过。。
      -P :可以使用绝对路径来压缩
      -N :比后面接的日期（yyyy/mm/dd)还要新的才会被打包进新建的文件中
      –exclude FILE :在压缩的过程中，不要将FILE打包

### User Rel
1. add new user: `sudo adduser newuser -g root` 
2. change passwd: `sudo passwd newuser`  
3. add to sudo user list: `sudo /usr/sbin/visudo`
4. remove user: `sudo deluser username`


### Linux’s directory structure

基本结构

1. /etc is an abbreviation for etcetera, the directory which stores all of your configuration files. 
2. /usr is the directory where "user" files reside, it contains all of the items that are not part of the system itself such as user programs and data. 
3. System programs are stored in /bin
4. user programs in /usr/bin, or, in Ubuntu, in /usr/share/.
5. The C:\Program Files folder would be /usr/bin in Ubuntu. /bin looks more like C:\windows.

参考资料

* [tuxfiles](http://www.tuxfiles.org/linuxhelp/linuxdir.html)
* [Ubuntu](http://manpages.ubuntu.com/manpages/natty/en/man7/hier.7.html)

### See Where a Package is Installed on Ubuntu

    dpkg -L <packagename>
    whereis <packagename>
    locate <packagename>


### Show PID By Port

    lsof -w -n -i tcp:8080
    fuser -n tcp 8080
    netstat -anp|grep :8080[[:blank:]]

### 添加python path

在.bashrc中修改

    PYTHONPATH="${PYTHONPATH}:/path/to/some/cool/python/package/:/path/to/another/cool/python/package/"
    export PYTHONPATH

之后，使用`source`命令加载配置
    
    source ~/.bashrc # or .bash_profile or .profile if you altered those

### .bashrc .bash_profile比较

    /bin/bash
           The bash executable
    /etc/profile
           The systemwide initialization file, executed for login shells
    ~/.bash_profile
           The personal initialization file, executed for login shells
    ~/.bashrc
           The individual per-interactive-shell startup file
    ~/.bash_logout
           The individual login shell cleanup file, executed when a login shell exits
    ~/.inputrc
           Individual readline initialization file

详见[stackworkflow](http://stackoverflow.com/questions/415403/whats-the-difference-between-bashrc-bash-profile-and-environment)

### ubuntu 鼠标 停止工作

    sudo rmmod psmouse && sudo modprobe psmouse

参考：[Mouse occasionally stops responding](http://askubuntu.com/questions/103851/mouse-occasionally-stops-responding)


### apt-get或新立得下载的软件包都在哪里？

1. `/var/cache/apt/archieve` 下的都是软件的安装缓存，你可以直接删除，或者用命令`sudo apt-get autoclean`（只删除低版本的deb包），`sudo apt-get clean`（全部删除）。为了以后重装系统方便，可以将这些deb包保存到其他地方。  
2. 一般的deb包（包括新立得或者 apt-get下载的）都安装在/usr或/usr/share或/usr/local。自己下载的压缩包或者编译的包，有些可以选择安装目录，一般放在/usr/local/，也有在/opt的。如果想知道具体位置，用命令代码:`dpkg -L xxx.deb` 注意，xxx是deb包的名称，也可以用新立得来查看。`dpkg -L firefox` 可查看Firefox的安装情况；`dpkg -L eclipse` 可查看Eclipse的安装位置。

