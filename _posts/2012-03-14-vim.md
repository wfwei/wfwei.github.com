---
layout: post
title: "vim"
comments: true
categories: []
---

##常用操作
* 删除偶数行 `%s/\n.*\n/\r/g` `:g/^/+1 d`
  global命令实际上是分成两步执行：首先扫描[range]指定范围内的所有行，给匹配{pattern}的行打上标记；然后依次对打有标记的行执行{command}命令，如果被标记的行在对之前匹配行的命令操作中被删除、移动或合并，则其标记自动消失，而不对该行执行{command}命令。{command}可以是一个ex命令，也可以是用|分隔的多个ex命令，这样我们就可以对被标记行，或从标记行寻址到的行进行多种不同的操作。


* 

##使用vim的剪贴板系统
  1. vim有12个粘贴板，分别是0、1、2、...、9、a、"、＋；用:reg命令可以查看各个粘贴板里的内容
  2. 要将vim的内容复制到某个粘贴板:
      * 在Viseal模式下选择要复制的内容，然后按`"Ny`完成复制，其中N为粘贴板号(注意是按一下双引号然后按粘贴板号最后按y)  
      * 在Normal模式下，按`"Nyy`完成复制当前行到N号剪贴板，可举一反三
  3. `*`号剪贴板是vim默认的，即在vim中简单用y只是复制到“（双引号)粘贴板里，同样用p粘贴的也是这个粘贴板里的内容;
  4. `+`号粘贴板是系统粘贴板，用"+y将内容复制到该粘贴板后可以使用Ctrl＋V将其粘贴到其他文档（如firefox、gedit）中，同理，要把在其他地方用Ctrl＋C或右键复制的内容复制到vim中，需要在正常模式下按"+p;

##文件编码
		
* 在Vim中可以直接查看文件编码	`:set fileencoding` 即可显示文件编码格式。
* 如果只是想查看其它编码格式的文件或者想解决用Vim查看文件乱码的问题，那么可以在~/.vimrc 文件中添加以下内容：`set encoding=utf-8 fileencodings=ucs-bom,utf-8,cp936`这样，就可以让vim自动识别文件编码（可以自动识别UTF-8或者GBK编码的文件），其实就是依照fileencodings提供的编码列表尝试，如果没有找到合适的编码，就用latin-1(ASCII)编码打开。
* 文件编码转换,在Vim中直接进行转换文件编码,比如将一个文件转换成utf-8格式`:set fileencoding=utf-8`

## 退出
    
* q（quit）：退出Vim
* w（write）：存盘
* w + 文件名：另存为指定文件
* w!+ 文件名：另存为指定文件，如该文件已存在，覆盖已有文件
* wq（与:x等价）：存盘退出
* q！：不存盘退出
* wq!:强制存盘退出
* ZZ：存盘并退出Vi

## 移动命令
        
1. 上下左右（可以用方向键直接移动）
    * h 左，或 Backspace 或 方向键
    * j 下，或 回车 或 + 或 方向键
    * k 上，或 － 或 方向键
    * l 右，或 Space 或 方向键
2. 移动到行首: ^ （移至第一个非空字符）或 Home键（移至行首，包括空字符）
3. 移动到行尾: $ 或 End键
4. 移动到当前页的首行: H
5. 移动到当前页的中间行: M
6. 移动到当前页的最后一行: L
7. 以word为单位移动: w
8. 显示行号: `:set number` 或 `:set nu`
9. 移动到第n行: `:n`
10. 向上滚动一屏（即Pagedown）: `Ctrl + b（backward）`
11. 向下滚动一屏（即Pageup）: `Ctrl + f （forward）`
12. 屏幕向下滚动一行: `Ctrl + e`

## 删除命令
 
* 删除光标所在行
    * dd（delete）：删除光标所在行，下一行自动上移
    * DD ：删除光标所在行，下一行不上移

* 删除一个字符
    * x：删除光标所在字符
    * X：删除光标前的字符

* 删除n个字符
    * nx：删除从光标处字符开始的n个字符
    * nX：删除从行首开始的n个字符

## 复制与粘贴 
		
* yank和put分别对应Windows下的Copy和Paste
* yy（yank）：复制当前行
* nyy: 复制多行
* yw：复制一个词
* p（put）：粘贴到光标后
* P：粘贴到光标前

##搜索和替换 
 
1. 搜索
    * `/word`  向下搜索
    * `?word`  向上搜索
    * `n`  继续寻找
    * `N`  继续寻找（反向）
    * `*`搜索游标所在处的字符
    * `g*`同`*`，但部分符合即可
		 
2. 替换: `[range]s/pattern/string/[c,e,g,i]`
    * range： 指的是范围，1,7 指從第一行至第七行，1,$ 指從第一行至最後一行，也可以用 % 代表。
    * pattern： 就是要被替换掉的字串，可以用正则表达式來表示。
    * string: 替换pattern的文本
    * c(confirm)：每次替换前询问  
    * e: 不显示error
    * g(globe): 不询问，整行替换，否则只替换第一个
    * i(ignore): 不分大小写
    * cegi可以组合
    * 可以使用`#`作为分隔符，此时中间出现的`/`不会作为分隔符
    * 实例
        * `:s/vivian/sky/` 替换当前行第一个 vivian 为 sky
        * `·:n,$s/vivian/sky/` 替换第 n 行开始到最后一行中每一行的第一个 vivian 为 sky
        * `:%s/vivian/sky/g（等同于 :g/vivian/s//sky/g）` 替换每一行中所有 vivian 为 sky
        * `:s#vivian/#sky/#` 替换当前行第一个 vivian/ 为 sky/

## vim 三种模式

1. Normal mode:Vim的缺省模式，在该模式下运行命令。
2. Insert mode:在该模式下插入/写文本。
3. Visual mode:在该模式下可以选择一块文本区域，并对该区域内的文本执行命令或编辑操作。

##参考资料

* [vim替换命令](http://cjjwzs.iteye.com/blog/1128324)
* [vim的复制粘贴小结](http://lsong17.spaces.live.com/blog/cns!556C21919D77FB59!603.entry)

