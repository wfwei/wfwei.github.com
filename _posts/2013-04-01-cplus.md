---
layout: post
title: "cplus"
category: posts
---

##-1/2商0余-1
  * 微软实习笔试的时候，突然不知道-1/2等于多少了，居然想成商-1余1了，这。。。
  * 好吧，余数可以为负
  * TODO 有时间要搞一搞除法底层实现和移位的关系
  
##macro vs inline
* 在c中保护效率的方法是使用macro，使用macro可以避免函数的调用（压栈，保护等复杂操作），而是将函数直接展开
* C++中使用宏很难发现错误，且不能访问对象的私有成员等原因，建议使用inline函数，在得到宏的替换效能的同时，拥有函数的本身特性（类型、作用域等等）
* 所以，C++中对象成员函数都视为自动转为內联的(除只有声明的函数之外)，如果想将一个全局函数定义为内联函数可用，inline关键字。
* 但是，在内联函数中如果有复杂操作将不被内联。如：循环和递归调用。
* 总结，将简单短小的函数定义为内联函数将会提高效率  
* Java中没有inline关键字，但一个函数如果声明为final(private也有final的效果)，则编译器会判断做不做內联优化

